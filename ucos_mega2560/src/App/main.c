/*
*********************************************************************************************************
*                                           Atmel ATmega256
*                                               main
*
*                                (c) Copyright 2005, Micrium, Weston, FL
*                                          All Rights Reserved
*
*
* File : main.c
* By   : Pawan Singh Rana
*********************************************************************************************************
*/

/*
*********************************************************************************************************
*                                               INCLUDES
*********************************************************************************************************
*/

#include "includes.h"
#include <avr_debugger.h>
#include "avr8-stub.h"

/*
*********************************************************************************************************
*                                              GLOBAL VARIABLES
*********************************************************************************************************
*/
extern OS_STK TaskStartStk[APP_CFG_TASK_START_STK_SIZE];
extern OS_STK TaskStk[APP_CFG_N_TASKS][APP_CFG_TASK_STK_SIZE];

/*
*********************************************************************************************************
*                                            FUNCTION PROTOTYPES
*********************************************************************************************************
*/
extern void TaskStart(void *p_arg);
void OS_Resource_Init(void);
void OS_Task_Create_Ext(void);

/*
*********************************************************************************************************
*                                                   MAIN
*********************************************************************************************************
*/
int main(void)
{
    /*Initialize AVR*/
    BSP_Init();

    /*debugger Init*/
    debug_init();

    /*Initialize uC/OS-II*/
    OSInit();

    /*Initialize OS Resources*/
    OS_Resource_Init();

    /*Create the start task*/
    OS_Task_Create_Ext();

    /*Start multi-tasking*/
    OSStart();

    return 0;
}
